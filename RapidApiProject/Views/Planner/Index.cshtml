@* Views/Planner/Index.cshtml *@
@{
    Layout = "~/Views/Shared/_Layout.cshtml";
    ViewBag.Title = "Planner · Ay Takvimi";
}

<section class="py-6">
    <!-- Üst bar -->
    <div class="flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between">
        <div class="flex items-center gap-3">
            <button id="prevMonth" class="px-3 py-2 rounded-xl border border-gray-200 dark:border-gray-800 hover:bg-gray-100 dark:hover:bg-gray-800"><i class="fa-solid fa-chevron-left"></i></button>
            <h1 id="monthTitle" class="text-2xl font-bold tracking-tight">Takvim</h1>
            <button id="nextMonth" class="px-3 py-2 rounded-xl border border-gray-200 dark:border-gray-800 hover:bg-gray-100 dark:hover:bg-gray-800"><i class="fa-solid fa-chevron-right"></i></button>
            <button id="todayBtn" class="ml-2 px-3 py-2 rounded-xl bg-indigo-600 text-white hover:bg-indigo-700">Bugün</button>
        </div>

        <div class="flex items-center gap-2">
            <a href="@Url.Action("Focus","Planner")" class="px-3 py-2 rounded-xl border border-gray-200 dark:border-gray-800 hover:bg-gray-100 dark:hover:bg-gray-800">3 Gün Odak</a>
            <button id="saveChanges" class="px-3 py-2 rounded-xl bg-emerald-600 text-white hover:bg-emerald-700">Değişiklikleri Kaydet</button>
        </div>
    </div>

    <!-- Ana düzen -->
    <div class="mt-6 grid grid-cols-1 lg:grid-cols-12 gap-6">
        <!-- Sol yan pano: Hızlı ekle + Backlog + Plan/Hedefler -->
        <aside class="lg:col-span-4 xl:col-span-3 space-y-6">
            <!-- Hızlı Ekle -->
            <div class="rounded-2xl border border-gray-200 dark:border-gray-800 bg-white dark:bg-gray-900 p-4">
                <h2 class="font-semibold mb-3">Hızlı Görev Ekle</h2>
                <div class="space-y-3">
                    <input id="quickTitle" class="w-full rounded-xl border border-gray-300 dark:border-gray-700 bg-transparent px-3 py-2" placeholder="Görev başlığı..." />
                    <div class="flex items-center gap-2">
                        <select id="quickScope" class="rounded-xl border border-gray-300 dark:border-gray-700 bg-transparent px-3 py-2">
                            <option value="backlog">Backlog</option>
                            <option value="day">Günlük</option>
                            <option value="week">Haftalık</option>
                            <option value="month">Aylık</option>
                            <option value="year">Yıllık</option>
                        </select>
                        <input id="quickDate" type="date" class="rounded-xl border border-gray-300 dark:border-gray-700 bg-transparent px-3 py-2" />
                        <button id="quickAdd" class="ml-auto px-3 py-2 rounded-xl bg-indigo-600 text-white hover:bg-indigo-700">Ekle</button>
                    </div>
                </div>
            </div>

            <!-- Backlog (sürüklenebilir chip'ler) -->
            <div class="rounded-2xl border border-gray-200 dark:border-gray-800 bg-white dark:bg-gray-900 p-4">
                <div class="flex items-center justify-between">
                    <h2 class="font-semibold">Backlog</h2>
                    <small class="text-gray-500 dark:text-gray-400">Sürükleyip takvime bırak</small>
                </div>
                <div id="backlogList" class="mt-3 flex flex-wrap gap-2">
                    @* JS dolduracak *@
                </div>
            </div>

            <!-- Planlar -->
            <div class="rounded-2xl border border-gray-200 dark:border-gray-800 bg-white dark:bg-gray-900 p-4">
                <h2 class="font-semibold mb-3">Planlar</h2>
                <div class="space-y-4 text-sm">
                    <div>
                        <div class="font-medium mb-2">Günün Planı</div>
                        <ul id="dayPlan" class="space-y-2">@* JS *@</ul>
                    </div>
                    <div>
                        <div class="font-medium mb-2">Haftanın Planı</div>
                        <ul id="weekPlan" class="space-y-2">@* JS *@</ul>
                    </div>
                </div>
            </div>

            <!-- Hedefler -->
            <div class="rounded-2xl border border-gray-200 dark:border-gray-800 bg-white dark:bg-gray-900 p-4">
                <h2 class="font-semibold mb-3">Hedefler</h2>
                <div class="space-y-4 text-sm">
                    <div>
                        <div class="font-medium mb-2">Aylık Hedefler</div>
                        <ul id="monthGoals" class="space-y-2">@* JS *@</ul>
                    </div>
                    <div>
                        <div class="font-medium mb-2">Yıllık Hedefler</div>
                        <ul id="yearGoals" class="space-y-2">@* JS *@</ul>
                    </div>
                </div>
            </div>
        </aside>

        <!-- Sağ ana: Ay takvimi -->
        <div class="lg:col-span-8 xl:col-span-9">
            <div class="rounded-2xl border border-gray-200 dark:border-gray-800 bg-white dark:bg-gray-900 overflow-hidden">
                <!-- Gün başlıkları -->
                <div class="grid grid-cols-7 text-xs font-medium text-gray-500 dark:text-gray-400 border-b border-gray-200 dark:border-gray-800">
                    <div class="px-3 py-2">Pzt</div>
                    <div class="px-3 py-2">Sal</div>
                    <div class="px-3 py-2">Çar</div>
                    <div class="px-3 py-2">Per</div>
                    <div class="px-3 py-2">Cum</div>
                    <div class="px-3 py-2">Cmt</div>
                    <div class="px-3 py-2">Paz</div>
                </div>
                <!-- Hücreler -->
                <div id="calendarGrid" class="grid grid-cols-7 auto-rows-[minmax(140px,auto)]">
                    @* JS render eder *@
                </div>
            </div>
        </div>
    </div>
</section>

@section Scripts {
    <script src="~/js/planner.js" asp-append-version="true"></script>
}
